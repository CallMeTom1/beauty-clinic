<div class="profile-page">
  <!-- Section de mise à jour du profil -->
  <section class="profile-section">
    <h2 class="section-title">{{ 'profile.editProfile' | translate }}</h2>

    <div class="avatar-container">
      <app-user-avatar [alt]="avatarAlt | translate" [width]="'150px'" [height]="'150px'"></app-user-avatar>
      <div class="upload-avatar">
        <label for="profileImage" class="upload-button">{{ changeAvatar | translate }}</label>
        <input type="file" id="profileImage" (change)="onProfileImageChange($event)" accept="image/*" hidden>
      </div>
    </div>

    <form (ngSubmit)="onSubmitProfile()" class="form-container">
      <fieldset>
        @for(input of profileFormControlConfigs; track input.label) {
          <app-floating-label-input-test [config]="input"></app-floating-label-input-test>
        }
      </fieldset>

      @if(this.securityService.error$()) {
        <div class="error-message">
          <i class="fa-thin fa-circle-exclamation"></i>
          <em>{{ this.securityService.error$()! | translate }}</em>
        </div>
      }

      <button type="submit" class="profile-update-button" [disabled]="!profileFormGroup.valid">
        {{ 'form.updateProfile' | translate }}
      </button>
    </form>
  </section>

  <!-- Section de mise à jour du mot de passe -->
  <section class="password-section">
    <h2 class="section-title">{{ 'profile.changePassword' | translate }}</h2>

    <form (ngSubmit)="onSubmitPassword()" class="form-container">
      <fieldset>
        @for(input of passwordFormControlConfigs; track input.label) {
          <app-floating-label-input-test [config]="input"></app-floating-label-input-test>
        }
      </fieldset>

      @if(this.securityService.error$()) {
        <div class="error-message">
          <i class="fa-thin fa-circle-exclamation"></i>
          <em>{{ this.securityService.error$()! | translate }}</em>
        </div>
      }

      <button type="submit" class="password-update-button" [disabled]="!passwordFormGroup.valid">
        {{ 'form.updatePassword' | translate }}
      </button>
    </form>
  </section>
</div>
